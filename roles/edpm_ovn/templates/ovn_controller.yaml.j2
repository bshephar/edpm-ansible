---
apiVersion: v1
kind: Pod
metadata:
  annotations:
    bind-mount-options: /var/lib/openstack/certs/ovn/default/ca.crt:z
  creationTimestamp: "2024-12-09T03:34:08Z"
  labels:
    app: ovncontroller-pod
  name: ovncontroller-pod
spec:
  hostNetwork: true
  hostname: {{ ansible_fqdn }}
  volumes:
  {% set vols = edpm_container_standalone_common_volumes | default([]) + edpm_ovn_controller_common_volumes + edpm_ovn_controller_tls_volumes %}
  {%- for vol in vols -%}
  - hostPath: 
      path: {{ vol.path }}
    name: {{ vol.name }}
  {% endfor -%}
  containers:
  - args:
    - kolla_start
    env:
    - name: KOLLA_CONFIG_STRATEGY
      value: COPY_ALWAYS
    image: {{ edpm_ovn_controller_agent_image }}
    name: ovncontroller
    securityContext:
      privileged: true
      procMount: Unmasked
    volumeMounts:
    {% set vols = edpm_container_standalone_common_volumes | default([]) + edpm_ovn_controller_common_volumes + edpm_ovn_controller_tls_volumes %}
    {%- for vol in vols -%}
    - mountPath: {{ vol.mountPath }}
      name: {{ vol.name }}
      readOnly: {{ vol.readOnly }}
    {% endfor -%}
